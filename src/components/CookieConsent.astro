---
/**
 * Cookie Consent Banner - LGPD Compliance
 * Exibe aviso de cookies e salva preferência no localStorage
 */
---

<div id="cookie-banner" class="fixed bottom-0 left-0 right-0 z-50 p-4 hidden">
  <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl border border-gray-200 p-6">
    <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
      <!-- Icon -->
      <div class="flex-shrink-0 hidden md:block">
        <div class="w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center">
          <svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
      </div>

      <!-- Text -->
      <div class="flex-1">
        <h3 class="font-semibold text-gray-900 mb-1">Nós valorizamos sua privacidade</h3>
        <p class="text-sm text-gray-600">
          Utilizamos cookies para melhorar sua experiência de navegação, personalizar conteúdo e analisar nosso tráfego.
          Ao clicar em "Aceitar", você concorda com o uso de cookies conforme nossa
          <a href="/privacidade" class="text-primary-600 underline hover:text-primary-700">Política de Privacidade</a>.
        </p>
      </div>

      <!-- Buttons -->
      <div class="flex gap-3 flex-shrink-0 w-full md:w-auto">
        <button
          id="cookie-reject"
          class="flex-1 md:flex-none px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
        >
          Recusar
        </button>
        <button
          id="cookie-accept"
          class="flex-1 md:flex-none px-6 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors"
        >
          Aceitar
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  const banner = document.getElementById('cookie-banner');
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');

  // Check if user already made a choice
  const cookieConsent = localStorage.getItem('cookie-consent');

  if (!cookieConsent) {
    // Show banner after a short delay for better UX
    setTimeout(() => {
      banner?.classList.remove('hidden');
    }, 1500);
  }

  acceptBtn?.addEventListener('click', () => {
    localStorage.setItem('cookie-consent', 'accepted');
    banner?.classList.add('hidden');
    // Here you could initialize analytics, etc.
    // window.gtag?.('consent', 'update', { analytics_storage: 'granted' });
  });

  rejectBtn?.addEventListener('click', () => {
    localStorage.setItem('cookie-consent', 'rejected');
    banner?.classList.add('hidden');
    // Disable any tracking
    // window.gtag?.('consent', 'update', { analytics_storage: 'denied' });
  });
</script>
